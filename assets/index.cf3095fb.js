var c=Object.defineProperty;var f=(s,o,t)=>o in s?c(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t;var d=(s,o,t)=>(f(s,typeof o!="symbol"?o+"":o,t),t);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(e){if(e.ep)return;e.ep=!0;const i=t(e);fetch(e.href,i)}})();class a extends EventTarget{constructor(t,n={blurRadius:50}){var l,h;super();d(this,"element");d(this,"canvas");d(this,"media");d(this,"options");this.options=n;let e=t;if(typeof t=="string"&&(e=document.querySelector(t),!e))throw new Error("There are no elements with this selector: "+t);this.element=e,this.element.classList.add("softlight");let i=this.element.querySelector("canvas");i==null?(this.canvas=document.createElement("canvas"),this.element.prepend(this.canvas)):this.canvas=i;let r=(h=(l=this.element.querySelector("img"))!=null?l:this.element.querySelector("video"))!=null?h:this.element.querySelector("iframe");if(r==null)throw new Error("There are no img, video, or iframe elements within this SoftLight element.");if(this.addEventListener("medialoaded",this.handleMediaLoaded.bind(this)),r instanceof HTMLIFrameElement)r.onload=this.handleIframeDocumentLoad.bind(this);else{const u=new CustomEvent("medialoaded",{detail:r});this.dispatchEvent(u)}}handleIframeDocumentLoad(t){if(!(t.target instanceof HTMLIFrameElement))return;const n=t.target.contentDocument;if(n==null)throw new Error("Document not found within iframe.");const e=n.querySelector("video")||n.querySelector("img");if(e==null)throw new Error("There are no video or img elements within this iframe element.");const i=new CustomEvent("medialoaded",{detail:e});this.dispatchEvent(i)}handleMediaLoaded(t){this.media=t.detail,this.media.onload=this.update.bind(this),this.media instanceof HTMLVideoElement&&(this.media.onplay=()=>{window.requestAnimationFrame(this.update.bind(this))},this.media.onpause=()=>{window.requestAnimationFrame(this.update.bind(this))},this.media.onloadeddata=this.update.bind(this))}getMediaBoundingClientRect(t){var e;if(t.ownerDocument===document)return t.getBoundingClientRect();const n=(e=t.ownerDocument.defaultView)==null?void 0:e.frameElement;return n==null?{x:0,y:0,width:0,height:0}:n.getBoundingClientRect()}getMediaIframe(t){var n;return t.ownerDocument===document?null:(n=t.ownerDocument.defaultView)==null?void 0:n.frameElement}update(){const{x:t,y:n,width:e,height:i}=this.element.getBoundingClientRect();if(this.canvas.width=e,this.canvas.height=i,this.media==null)return;const{x:r,y:l,width:h,height:u}=this.getMediaBoundingClientRect(this.media),m=this.canvas.getContext("2d");if(!m)throw new Error("Cannot get context for canvas.");if(m.drawImage(this.media,r-t,l-n,h,u),this.canvas.style.filter=`blur(${this.options.blurRadius}px)`,this.media instanceof HTMLVideoElement){if(this.media.paused===!0)return;window.requestAnimationFrame(this.update.bind(this))}}}new a("#softlight-img");new a("#softlight-vid");new a("#softlight-yt");new a("#softlight-iframe");new a("#softlight-big-blur",{blurRadius:100});new a("#softlight-smol-blur",{blurRadius:10});
